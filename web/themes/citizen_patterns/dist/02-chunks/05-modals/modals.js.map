{"version":3,"sources":["02-chunks/05-modals/modals.js"],"names":["$","Drupal","behaviors","modal","attach","context","once","each","console","log","pid","attr","appendTo","window","addEventListener","modalClose","modalRoot","classList","add","setTimeout","remove","get","button","close","getElementsByTagName","length","focus","dialog","e","stopPropagation","stopImmediatePropagation","document","keydown","event","keyCode","getElementById","bind","query","querySelector","jQuery"],"mappings":"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","sourcesContent":["(function($, Drupal) {\n\n\t//Pop-up content functionality.\n\tDrupal.behaviors.modal = {\n\t\tattach: function (context, settings) {\n\t\t\t$(\".modal\", context).once('modalContent').each(function(){\n\t\t\t\tconsole.log('modals exist');\n\t\t\t\t//set the variable needed to keep the modal controls specific\n\t\t\t\tvar pid = $('.modal-lead', this).attr('data-attribute-id');\n\t\t\t\tconsole.log(pid);\n\t\t\t\t$('.modal-wrapper', this).appendTo('.overflow-guard');\n\t\n\t\t\t\t//load the setup\n\t\t\t\twindow.addEventListener('load', setup); \n\t\t\t\tconst get = document.getElementById.bind(document);\n\t\t  \t\tconst query = document.querySelector.bind(document);\n\t\n\t\t\t\tfunction setup() {\n\t\t\t\t\t//set the controls for this specific modal\n\t\t\t\t\tlet modalRoot = get('modal-outer-' + pid);\n\t\t\t\t\tlet button = get('modal-trigger-' + pid);\n\t\t\t\t\tlet modal = get('modal-inner-' + pid);\n\t\t\t\t\tlet close = get('modal-close-' + pid);\n\t\t\t\t\t//set the click functions\n\t\t\t\t\tmodalRoot.addEventListener('click', rootClick);\n\t\t\t\t\tbutton.addEventListener('click', openModal);\n\t\t\t\t\tmodal.addEventListener('click', modalClick);\n\t\t\t\t\tclose.addEventListener('click', modalClose);\n\t\t\t\t\t//close when the modal window is clicked out side of the content\n\t\t\t\t\tfunction rootClick() {\n\t\t\t\t\tmodalRoot.classList.add('close-modal');\n\t\t\t\t\tsetTimeout(function(){ modalRoot.classList.remove('close-modal','active-modal'); }, 1200);\n\t\t\t\t\t}\n\t\t\t\t\t//close when the close button is clicked\n\t\t\t\t\tfunction modalClose() {\n\t\t\t\t\tmodalRoot.classList.add('close-modal');\n\t\t\t\t\tsetTimeout(function(){ modalRoot.classList.remove('close-modal','active-modal'); }, 1200);\n\t\t\t\t\t}\n\t\t\t\t\t//open the modal\n\t\t\t\t\tfunction openModal() {\n\t\t\t\t\tmodalRoot.classList.add('active-modal');\n\t\t\t\t\t\tif(modal.getElementsByTagName('form').length != 0) {\n\t\t\t\t\t\t\tmodal.getElementsByTagName('form')[0].getElementsByTagName('input')[0].focus();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet dialog = modalRoot.getElementsByTagName('dialog')[0];\n\t\t\t\t\t\t\tdialog.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//prevent close when the modal inner content is clicked\n\t\t\t\t\tfunction modalClick(e) {\n\t\t\t\t\t//e.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\te.stopImmediatePropagation();\n\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t$(document).keydown(function(event) { \n\t\t\t\t\t\tif (event.keyCode == 27) { \n\t\t\t\t\t\t  modalClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t  });\n\t\t  \t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\t})(jQuery, Drupal);"],"file":"modals.js"}